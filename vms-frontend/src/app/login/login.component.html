<h2>Login</h2>

<div *ngIf="isLoading" class="alert alert-info">Logging in...</div>
<div *ngIf="error" class="alert alert-danger">{{ error }}</div>

<!-- Use novalidate to prevent default browser validation -->
<form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
  <div class="mb-3">
    <label for="usernameOrEmail" class="form-label">Username or Email:</label>
    <input
      type="text"
      id="usernameOrEmail"
      class="form-control"
      formControlName="usernameOrEmail"
      [ngClass]="{ 'is-invalid': loginForm.get('usernameOrEmail')?.touched && loginForm.get('usernameOrEmail')?.invalid }"
    />
    <!-- Validation errors -->
    <div *ngIf="loginForm.get('usernameOrEmail')?.touched && loginForm.get('usernameOrEmail')?.errors" class="invalid-feedback">
      <div *ngIf="loginForm.get('usernameOrEmail')?.errors?.['required']">Username or email is required.</div>
    </div>
  </div>

  <div class="mb-3">
    <label for="password" class="form-label">Password:</label>
    <input
      type="password"
      id="password"
      class="form-control"
      formControlName="password"
      [ngClass]="{ 'is-invalid': loginForm.get('password')?.touched && loginForm.get('password')?.invalid }"
      />
     <!-- Validation errors -->
     <div *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.errors" class="invalid-feedback">
       <div *ngIf="loginForm.get('password')?.errors?.['required']">Password is required.</div>
     </div>
  </div>

  <button type="submit" class="btn btn-primary" [disabled]="loginForm.invalid || isLoading">
    Login
  </button>

  <div class="mt-3">
    Don't have an account? <a routerLink="/register">Register here</a>
  </div>
</form>